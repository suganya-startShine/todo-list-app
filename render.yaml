# # databases:
# #   - name: todo_db
# #     databaseName: todo_db
# #     user: todo_user

# # services:
# #   - type: web
# #     name: todo-list-app
# #     env: python
# #     buildCommand: "pip install -r requirements.txt && python init_db.py"
# #     startCommand: "gunicorn app:app"
# #     envVars:
# #       - key: PYTHON_VERSION
# #         value: 3.11.0
# #       - key: DATABASE_URL
# #         fromDatabase:
# #           name: todo_db
# #           property: connectionString


# databases:
#   - name: todo-db
#     databaseName: todo_db
#     user: todo_user
#     plan: free

# services:
#   - type: web
#     name: todo-list-app
#     runtime: python
#     plan: free
#     buildCommand: "pip install -r requirements.txt && python init_db.py"
#     startCommand: "gunicorn app:app"
#     envVars:
#       - key: PYTHON_VERSION
#         value: 3.11.0
#       - key: DATABASE_URL
#         fromDatabase:
#           name: todo-db
#           property: connectionString


# render.yaml for Todo List App
# ✅ Uses SAME database as notes app (notes-db)

services:
  - type: web
    name: todo-list-app
    runtime: python
    plan: free
    buildCommand: "pip install -r requirements.txt"
    startCommand: "gunicorn app:app"
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: DATABASE_URL
        # ✅ Connect to existing notes-db database
        fromDatabase:
          name: notes-db
          property: connectionString

# ✅ NO new database created - reusing notes-db
# Both apps share the same Postgres instance
# Notes app uses: notes table
# Todo app uses: todo_users, todo_categories, todo_items tables